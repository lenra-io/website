- const footerGroups = {};

mixin displayFooterPageLink(p)
    - const path = p.path || `${p.name}.html`
    if (p.disabled)
        a(href=path disabled aria-disabled="true" tabindex="-1" title="Coming soon")= trad.name
    else 
        a(href=path)= t(`translation:page.${p.name}.name`)

mixin displayFooterPageGroup(group, pages)
    - var disabled = pages.filter(p => !p.disabled).length==0
    if (disabled)
        section
            h3= group
            each page in pages
                +displayFooterPageLink(page)
    else
        section
            h3= group
            each page in pages
                +displayFooterPageLink(page)

mixin displayFooterElement(element)
    - var pages = footerGroups[element]
    +displayFooterPageGroup(t(`translation:pageGroup.${element}.name`), pages)

footer.invert-colors
    //- section 
    //-     h2 So, we're going up together?
    //-     p focus on what you love about developing, and forget about the painful tasks 


    a(href="./") Lenra
    nav
        section#financed-by
            h3= t("translation:footer.financedBy")
            a.organization(href="https://www.nouvelle-aquitaine.fr" target="_blank" rel="noopener")
                img(src="/img/partners/NouvelleAquitaine-vertical.svg" alt="Nouvelle Aquitaine" loading="lazy")
            a.organization(href="https://www.bpifrance.fr" target="_blank" rel="noopener")
                img(src="/img/partners/bpi.svg" alt="Bpifrance" loading="lazy")
            a.btn.primary.lenra-icon-heart(href="https://github.com/sponsors/lenra-io" target="_blank" rel="noopener") GitHub Sponsor
        section
            h3= t("translation:footer.developers")
            a(href="https://docs.lenra.io")= t("translation:footer.documentation")
            a(href="https://dev.lenra.io")= t("translation:footer.devPlatform")
            a(href="https://app.lenra.io")= t("translation:footer.appPlatform")
        
        - const footerItems = pageList.filter(p => p.group).flatMap(p => {
        -    if (!footerGroups[p.group]) {
        -        footerGroups[p.group] = [p];
        -        return p.group;
        -    }
        -    else {
        -        footerGroups[p.group].push(p);
        -        return [];
        -    }
        - });

        each el in footerItems
            +displayFooterElement(el)

    ul 
        li= t("translation:footer.socials.followUs")
            +social().app
        li= t("translation:footer.socials.developers")
            +social(true).app
    
    aside
        a(href="https://www.producthunt.com/posts/lenra-beta?utm_source=badge-featured&utm_medium=badge&utm_souce=badge-lenra&#0045;beta" target="_blank" rel="noopener")
            img(src="https://api.producthunt.com/widgets/embed-image/v1/featured.svg?post_id=374563&theme=light" alt="Lenra - beta - Optimize your app creation | Product Hunt" style="width: 250px; height: 54px;" width="250" height="54")
        div(id="wcb" class="carbonbadge wcb-d")
        script(src="https://unpkg.com/website-carbon-badges@1.1.3/b.min.js" defer)
